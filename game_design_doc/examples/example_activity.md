# 活动中心 功能设计文档示例

> 本文档为活动功能类型的参考示例，展示各章节的填写方式和深度。

---

## 一、设计目的

### 1.1 功能定位

活动中心是游戏的核心运营工具，承载所有限时活动、日常活动和福利活动的入口。通过活动中心，玩家可以：
- 了解当前进行中的所有活动
- 领取活动奖励
- 获得活动引导和提示

本功能的目标是提供一个统一、清晰的活动管理平台，既能满足运营需求的灵活性，又能保证玩家体验的流畅性。

### 1.2 期望体验

- **信息集中**：玩家无需在游戏各处寻找活动入口，一个界面查看所有活动
- **及时提醒**：通过红点和推送，玩家不会错过重要活动
- **快速领奖**：简化领奖流程，减少玩家操作步骤
- **引导明确**：新活动开启时有明确的引导和说明

---

## 二、功能概述

### 2.1 背景概述

随着游戏运营深入，各类活动越来越多，玩家需要一个统一的入口来管理这些活动。活动中心应运而生，作为游戏运营的核心枢纽，连接玩家与各类活动内容。

### 2.2 功能简介

**核心玩法**：

玩家通过主界面的活动中心按钮进入活动界面。界面分为"活动专区"和"特惠福利"两大板块。活动专区展示所有正在进行的游戏活动，包括日常活动、限时活动、节日活动等。特惠福利展示各类充值和福利活动。

玩家可以在活动列表中查看活动详情，了解活动规则、参与条件、奖励内容等信息。完成活动任务后，可以在活动界面直接领取奖励。

**主要特点**：

1. **统一管理**：所有活动统一在活动中心展示和管理
2. **分类清晰**：按活动类型分类展示，方便玩家查找
3. **实时更新**：活动状态实时更新，自动刷新列表
4. **红点提示**：有奖励可领取时显示红点，引导玩家领奖
5. **灵活配置**：支持后台灵活配置活动内容和展示

**玩家操作**：

1. 点击主界面活动中心按钮
2. 浏览活动列表，选择感兴趣的活动
3. 进入活动详情，了解规则和奖励
4. 参与活动，完成任务
5. 领取活动奖励

### 2.3 结构划分

```
活动中心
├── 活动专区
│   ├── 日常活动区
│   │   ├── 每日签到
│   │   ├── 每日任务
│   │   └── 在线奖励
│   ├── 限时活动区
│   │   ├── 周常活动
│   │   ├── 节日活动
│   │   └── 运营活动
│   └── 特殊玩法区
│       ├── 竞技场
│       ├── 爬塔
│       └── 联盟战
├── 特惠福利
│   ├── 首充奖励
│   ├── 累充活动
│   ├── 每日礼包
│   └── 限时特惠
└── 活动公告
    └── 活动预告和说明
```

---

## 三、规则说明

### 3.1 活动状态机

| 状态 | 说明 | 进入条件 | 退出条件 |
|------|------|----------|----------|
| 未开启 | 活动尚未开始 | 创建活动配置后 | 到达开始时间或满足开启条件 |
| 预热中 | 活动预告阶段 | 开始时间前24小时 | 到达开始时间 |
| 进行中 | 活动正在进行 | 到达开始时间且满足开启条件 | 到达结束时间或手动关闭 |
| 结算中 | 活动结束，正在结算奖励 | 到达结束时间 | 结算完成（约5分钟） |
| 已结束 | 活动完全结束 | 结算完成 | 活动从列表移除（24小时后） |

### 3.2 开启条件

| 条件类型 | 具体要求 | 说明 |
|----------|----------|------|
| 玩家等级 | 主堡等级≥5 | 避免新手期功能过载 |
| 完成教学 | 完成新手引导第3章 | 确保玩家熟悉基础操作 |
| 服务器时间 | 服务器开服后第2天00:00 | 给玩家适应期 |

### 3.3 参与条件

不同活动有不同的参与条件，由具体活动配置决定。活动中心本身无参与门槛，玩家只要满足开启条件即可进入查看所有活动。

**通用参与条件类型**：
- 玩家等级要求
- VIP等级要求
- 前置任务完成要求
- 资源消耗要求
- 参与次数限制

### 3.4 循环方式

| 循环方式 | 循环规则 | 案例 |
|----------|----------|------|
| 日循环 | 每日00:00刷新 | 每日签到、每日任务 |
| 周循环 | 每周一00:00刷新 | 周常活动、周末活动 |
| 月循环 | 每月1日00:00刷新 | 月度累充、月卡奖励 |
| 固定时间循环 | 按配置的时间开启和关闭 | 节日活动（春节、国庆等） |
| 不循环 | 一次性活动 | 首充奖励、开服活动 |

### 3.5 结束规则

| 结束条件 | 结束规则 | 后续处理 |
|----------|----------|----------|
| 时间到期 | 活动结束时间到达 | 进入结算状态，5分钟后发放奖励至邮件 |
| 任务完成 | 玩家完成所有活动任务 | 该玩家活动状态标记为已完成，仍可查看 |
| 手动关闭 | 运营后台手动关闭活动 | 立即结束活动，未领奖励保留24小时 |
| 达到参与上限 | 活动总参与人数达到上限 | 停止新玩家参与，已参与玩家正常进行 |

**结算流程**：
1. 活动结束时间到达，活动状态变为"结算中"
2. 系统计算所有玩家的活动进度和应得奖励
3. 已领取奖励直接入账，未领取奖励发送邮件（保留7天）
4. 5分钟后活动状态变为"已结束"
5. 24小时后活动从活动列表移除

### 3.6 特殊处理

| 特殊情况 | 处理方式 |
|----------|----------|
| 活动进行中玩家等级下降 | 保持当前活动可访问状态，直到活动结束后重新检查 |
| 网络断线导致领奖失败 | 奖励不扣除，玩家重连后可重新领取 |
| 背包已满无法领取奖励 | 奖励发送至邮件，保留7天 |
| 活动时间跨服维护 | 维护时间计入活动时间，维护后自动延长相应时长 |
| 同时开启的活动超过展示上限 | 按优先级排序，低优先级活动折叠到"更多"选项卡 |
| 活动配置错误（如奖励为空） | 活动不显示在列表中，后台发出警告通知 |
| 玩家在活动结束前1分钟完成任务 | 奖励正常发放，不受结束时间影响 |

### 3.7 红点提示规则

| 提示位置 | 出现条件 | 消失条件 |
|----------|----------|----------|
| 主界面活动中心按钮 | 任意活动有未领取奖励 OR 有新活动开启（24小时内） | 领取所有奖励 AND 查看过所有新活动 |
| 活动专区标签 | 该分类下有活动有未领取奖励 | 领取该分类所有奖励 |
| 具体活动入口 | 该活动有未领取奖励 OR 该活动为新开启（未查看） | 领取该活动奖励 OR 进入活动详情页 |
| 特惠福利标签 | 有可购买的限时特惠（且玩家未购买） | 购买或特惠过期 |

**红点优先级**（从高到低）：
1. 可领取奖励
2. 新活动开启
3. 活动即将结束（剩余24小时）
4. 可购买特惠

### 3.8 活动展示规则

**排序规则**（优先级从高到低）：
1. 有未领取奖励的活动
2. 新开启的活动（24小时内）
3. 即将结束的活动（剩余48小时内）
4. 配置的优先级权重
5. 开始时间（越早越靠前）

**显示数量**：
- 活动专区最多同时展示15个活动
- 超过15个时，低优先级活动折叠到"更多活动"
- 特惠福利最多同时展示8个

**活动移除规则**：
- 活动结束24小时后从列表移除
- 已完成的一次性活动（如首充）移除但保留查看入口
- 循环活动刷新后保留在列表中

---

## 四、策划需求

### 4.1 数值需求

| 参数名称 | 取值 | 说明 |
|----------|------|------|
| 活动中心解锁等级 | 主堡等级5 | 玩家达到此等级解锁活动中心 |
| 活动专区最大显示数量 | 15 | 超过此数量折叠到"更多" |
| 特惠福利最大显示数量 | 8 | 限制特惠展示数量 |
| 新活动标记持续时间 | 24小时 | 活动开启后24小时内显示"新"标签 |
| 即将结束提示时间 | 48小时 | 剩余时间少于48小时显示倒计时 |
| 活动结算时长 | 5分钟 | 活动结束后结算奖励所需时间 |
| 未领奖励邮件保留时间 | 7天 | 发送到邮件的奖励保留时长 |
| 已结束活动保留时间 | 24小时 | 结束后在列表中保留时长 |

### 4.2 系统需求

**依赖系统**：
- **背包系统**：支持奖励道具的存储，背包满时提供溢出处理
- **任务系统**：提供任务进度追踪接口，同步任务完成状态
- **邮件系统**：支持活动奖励发送，处理背包满的情况
- **红点系统**：支持自定义红点逻辑，多层级红点联动
- **支付系统**：处理特惠福利的购买流程
- **时间系统**：提供服务器时间，处理跨时区和夏令时
- **公告系统**：支持活动公告和预告的展示

**接口需求**：
- `GetActiveActivities()`：获取当前进行中的所有活动列表
- `GetActivityDetail(activityId)`：获取指定活动的详细信息
- `ClaimReward(activityId, rewardId)`：领取活动奖励
- `CheckActivityCondition(activityId, playerId)`：检查玩家是否满足活动参与条件

### 4.3 配置表需求

**新建表：activity_config**

| 字段名 | 类型 | 说明 |
|--------|------|------|
| activity_id | int | 活动ID，主键 |
| activity_name | string | 活动名称 |
| activity_type | enum | 活动类型：daily/weekly/limited/festival |
| category | enum | 分类：activity_zone/special_offer |
| start_time | datetime | 开始时间 |
| end_time | datetime | 结束时间 |
| loop_type | enum | 循环类型：daily/weekly/monthly/fixed/none |
| open_condition | json | 开启条件配置（等级、任务等） |
| participate_condition | json | 参与条件配置 |
| reward_config | json | 奖励配置 |
| priority | int | 展示优先级（数值越大越靠前） |
| icon_path | string | 活动图标路径 |
| desc | text | 活动描述 |

**修改表：player_activity**

| 字段名 | 类型 | 说明 |
|--------|------|------|
| player_id | bigint | 玩家ID |
| activity_id | int | 活动ID |
| status | enum | 玩家活动状态：not_started/in_progress/completed |
| progress | json | 活动进度数据 |
| claimed_rewards | json | 已领取奖励ID列表 |
| last_update_time | datetime | 最后更新时间 |

---

## 附录：参考信息

**文档版本**：v1.0  
**创建时间**：2026-01-28  
**最后更新**：2026-01-28  

**说明**：
- 本文档为活动功能类型的示例，实际项目中应根据具体需求调整章节内容
- 表格和列表用于组织结构化信息，提高可读性
- 规则说明章节是文档的核心，应尽可能详尽
