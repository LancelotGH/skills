# 完整工作流演示 - 从简要描述到详细文档

本文档展示一个完整的AI辅助文档生成过程，从用户的简要描述到最终的详细开发文档。

---

## 第一阶段：用户输入（简要描述）

用户提供以下简要描述：

```markdown
# 每日签到

## 核心玩法
玩家每天登录后可以在签到界面点击签到按钮，领取当日的签到奖励。
连续签到天数越多，奖励越丰富。

## 主要规则
- 每日可签到1次，每天00:00刷新
- 连续签到7天为一个周期，完成后重新开始
- 如果中断签到，连续天数清零，重新从第1天开始计算

## 关键数值
- 第1天奖励：金币100
- 第7天奖励：金币500 + 稀有宝箱×1
- 每天奖励递增

## 特殊说明
- 需要支持补签功能（消耗钻石）
- VIP玩家可以双倍领奖
```

---

## 第二阶段：AI分析提取要素

AI助手分析简要描述，提取核心信息：

### 提取的核心要素

**功能名称**：每日签到

**功能类型**：日常活动/签到系统

**核心玩法**：
- 玩家每天点击签到按钮
- 领取对应奖励
- 连续签到奖励递增

**识别的关键规则**：
1. 每日限制1次
2. 00:00刷新
3. 7天一个周期
4. 断签重置
5. 支持补签
6. VIP特权

**识别的数值点**：
- 奖励范围：100-500金币
- 周期长度：7天
- 递增机制：需要设计完整曲线

**需要推导的内容**：
- 开启条件（玩家等级？）
- 补签规则（价格？次数限制？）
- VIP双倍规则（哪些VIP？）
- 特殊情况处理
- 系统依赖
- 配置表结构

---

## 第三阶段：AI推导补充细节

基于游戏设计经验，AI推导缺失的规则和细节：

### 3.1 开启条件推导

**思考**：签到是基础日常，应该低门槛
**推导结果**：
- 玩家完成新手引导即可解锁
- 建议主堡等级≥2或完成引导第一章

### 3.2 补签规则推导

**思考**：补签是付费点，需要限制但不能太贵
**推导结果**：
- 每次补签消耗钻石：50×补签天数
- 单次只能补签1天（示例1天前）
- 7天周期内最多补签3天（防止滥用）

### 3.3 VIP双倍推导

**思考**：VIP特权应该覆盖主流付费玩家
**推导结果**：
- VIP3及以上玩家可双倍领取奖励
- 双倍仅限基础金币奖励，物品奖励不翻倍
- 消耗签到次数不变

### 3.4 完整数值曲线设计

**思考**：7天奖励需要平滑递增，第7天有明显高峰
**推导结果**：

| 天数 | 金币 | 物品奖励 | VIP双倍后金币 |
|------|------|----------|---------------|
| 第1天 | 100 | - | 200 |
| 第2天 | 150 | - | 300 |
| 第3天 | 200 | 强化石×1 | 400 |
| 第4天 | 250 | - | 500 |
| 第5天 | 300 | 强化石×2 | 600 |
| 第6天 | 400 | - | 800 |
| 第7天 | 500 | 稀有宝箱×1 | 1000 |

### 3.5 特殊情况处理推导

| 特殊情况 | 处理方式 |
|----------|----------|
| 玩家0点前后频繁登录 | 以服务器时间为准，同一天只能签到1次，用日期判断 |
| 补签时网络断线 | 钻石不扣除，补签未生效，玩家可重试 |
| 已签到7天，再次签到 | 重置为第1天，开始新周期 |
| VIP等级在签到后下降 | 已领取的奖励不回收，下次签到按当前VIP计算 |
| 跨服维护期间签到 | 维护期间无法签到，视为断签|
| 玩家恶意修改客户端时间 | 以服务器时间为准，客户端时间仅用于显示 |

### 3.6 系统依赖识别

**需要的系统**：
- **时间系统**：判断日期刷新，提供服务器时间
- **背包系统**：发放物品奖励
- **邮件系统**：背包满时发送邮件
- **VIP系统**：查询玩家VIP等级，判断是否双倍
- **支付系统**：处理补签钻石消耗
- **红点系统**：未签到时显示红点提示

**接口需求**：
- `CanSignIn(playerId)` → boolean：判断今日是否可签到
- `SignIn(playerId)` → result：执行签到，返回奖励
- `MakeUpSign(playerId, daysAgo)` → result：补签指定天数
- `GetSignInStatus(playerId)` → status：获取签到状态和连续天数

---

## 第四阶段：组织文档结构

根据功能复杂度，选择简化的章节结构：

```
一、功能概述
二、规则说明
  2.1 开启条件
  2.2 签到规则
  2.3 补签规则
  2.4 VIP双倍规则
  2.5 特殊情况处理
三、数值需求
  3.1 签到奖励配置
  3.2 补签价格配置
四、技术需求
  4.1 系统依赖
  4.2 接口需求
  4.3 配置表结构
```

---

## 第五阶段：生成详细文档

以下是AI生成的完整文档内容：

---

# 每日签到 功能设计文档

## 一、功能概述

### 核心玩法

每日签到是游戏的基础日常玩法之一。玩家每天登录游戏后，可以在签到界面点击签到按钮，领取当日的签到奖励。连续签到天数越多，获得的奖励越丰富。

签到以7天为一个周期，完成7天连续签到后，从第1天重新开始计算。如果中途断签（某天未签到），则连续天数清零，重新从第1天开始。

玩家可以消耗钻石进行补签，弥补之前漏签的天数。VIP3及以上玩家可以双倍领取金币奖励，享有额外收益。

### 玩家操作流程

1. 玩家在主界面点击"签到"按钮（如果当日未签到，按钮上有红点）
2. 进入签到界面，查看当前连续签到天数和可领取的奖励
3. 点击"签到"按钮，弹出奖励获得提示
4. 如果之前有断签，可以选择"补签"按钮，消耗钻石补签1天
5. 签到完成后，奖励自动发放到背包

---

## 二、规则说明

### 2.1 开启条件

| 条件类型 | 具体要求 | 说明 |
|----------|----------|------|
| 玩家等级 | 主堡等级≥2 | 完成新手引导后开放 |
| 前置任务 | 完成新手引导第一章 | 确保玩家理解基础操作 |

### 2.2 签到规则

**刷新时间**：每天00:00（服务器时间）

**签到次数**：每天可签到1次

**连续签到周期**：7天为一个周期

**签到流程**：
1. 玩家点击签到按钮
2. 系统检查今日是否已签到
3. 若未签到，发放对应天数的奖励
4. 连续签到天数+1
5. 若已经是第7天，下次签到重置为第1天

**断签规则**：
- 如果玩家某天未签到（跨过了0点未签到），视为断签
- 断签后，连续签到天数重置为0
- 下次签到从第1天开始重新计算

**判断逻辑**：
```
if (玩家上次签到日期 == 今天) {
    已签到，不能重复签到
} else if (玩家上次签到日期 == 昨天) {
    连续签到，天数+1
} else {
    断签，天数重置为1
}
```

### 2.3 补签规则

**补签功能**：玩家可以消耗钻石补签之前漏掉的1天

**补签条件**：
- 当前未签到（必须是断签状态）
- 只能补签昨天（不能补签更早的日期）
- 每个周期内最多补签3次

**补签价格**：
- 补签昨天：50钻石
- 如果连续补签多次，每次价格递增：50、100、150钻石

**补签流程**：
1. 玩家点击"补签"按钮
2. 弹出确认框，显示消耗的钻石数量
3. 确认后，扣除钻石
4. 将昨天标记为已签到，但不发放昨天的奖励（补签不给奖励，只保持连续）
5. 连续签到天数不重置

**重要**：补签只是为了维持连续签到状态，**不发放补签当天的奖励**。玩家仍需今天签到获得今天的奖励。

### 2.4 VIP双倍规则

**享受条件**：VIP等级≥3

**双倍内容**：
- 基础金币奖励翻倍
- 物品奖励（强化石、宝箱）不翻倍

**示例**：
- 非VIP玩家第1天签到：获得100金币
- VIP3玩家第1天签到：获得200金币
- 非VIP玩家第3天签到：获得200金币 + 强化石×1
- VIP3玩家第3天签到：获得400金币 + 强化石×1（强化石数量不变）

### 2.5 特殊情况处理

| 特殊情况 | 处理方式 |
|----------|----------|
| 玩家0点前后频繁登录 | 以服务器日期为准（YYYY-MM-DD），同一天只能签到1次 |
| 签到时背包已满 | 金币直接加到玩家金币（不入背包），物品奖励发送邮件保留7天 |
| 补签时网络断线 | 钻石不扣除，补签未生效，玩家可重新尝试 |
| 已签到7天完成周期 | 下次签到自动重置为第1天，开始新周期 |
| VIP等级在签到后下降 | 已领取的奖励不回收，下次签到按当前VIP等级计算 |
| 跨服维护期间无法签到 | 视为正常断签，连续天数会重置（建议避免在凌晨维护）|
| 玩家修改客户端时间 | 以服务器时间为准，客户端时间仅用于界面显示倒计时 |
| 补签次数已达上限 | 补签按钮置灰，提示"本周期补签次数已用完" |

---

## 三、数值需求

### 3.1 签到奖励配置

| 签到天数 | 金币奖励 | 物品奖励 | VIP双倍后金币 | 备注 |
|----------|----------|----------|---------------|------|
| 第1天 | 100 | - | 200 | 基础奖励 |
| 第2天 | 150 | - | 300 | +50% |
| 第3天 | 200 | 强化石×1 | 400 | +100%，赠送强化石 |
| 第4天 | 250 | - | 500 | +150% |
| 第5天 | 300 | 强化石×2 | 600 | +200% |
| 第6天 | 400 | - | 800 | +300% |
| 第7天 | 500 | 稀有宝箱×1 | 1000 | 周期完成奖励 |

**总结**：
- 7天累计金币（非VIP）：1900
- 7天累计金币（VIP）：3800
- 物品奖励：强化石×3，稀有宝箱×1

### 3.2 补签价格配置

| 补签次数 | 消耗钻石 |
|----------|----------|
| 第1次 | 50 |
| 第2次 | 100 |
| 第3次 | 150 |
| 第4次及以上 | 不允许补签 |

### 3.3 其他参数

| 参数名称 | 数值 | 说明 |
|----------|------|------|
| 签到周期天数 | 7 | 连续签到周期 |
| 每周期最大补签次数 | 3 | 防止滥用 |
| VIP双倍最低等级 | 3 | VIP3及以上 |
| 邮件物品保留时间 | 7天 | 背包满时发送邮件 |

---

## 四、技术需求

### 4.1 系统依赖

**依赖系统**：
- **时间系统**：提供服务器时间，判断日期变化和刷新时机
- **背包系统**：发放签到物品奖励，处理背包满的情况
- **邮件系统**：背包满时发送物品奖励到邮件
- **VIP系统**：查询玩家VIP等级，判断是否享受双倍
- **支付系统**：处理补签的钻石消耗
- **红点系统**：未签到时在主界面按钮显示红点

### 4.2 接口需求

**需要的接口**：

```
CanSignIn(playerId: bigint) -> bool
- 功能：判断玩家今日是否可以签到
- 返回：true=可以签到，false=已签到或未解锁

GetSignInStatus(playerId: bigint) -> SignInStatus
- 功能：获取玩家的签到状态
- 返回：{
    continuousDays: int,        // 连续签到天数（1-7）
    lastSignInDate: date,        // 最后签到日期
    todaySignedIn: bool,         // 今天是否已签到
    makeUpCount: int,            // 本周期已补签次数
    nextReward: RewardConfig     // 下次签到可获得的奖励
  }

SignIn(playerId: bigint) -> SignInResult
- 功能：执行签到操作
- 返回：{
    success: bool,
    rewards: Array<Reward>,      // 获得的奖励列表
    newContinuousDays: int       // 签到后的连续天数
  }

MakeUpSign(playerId: bigint) -> MakeUpResult
- 功能：执行补签操作
- 返回：{
    success: bool,
    diamondCost: int,            // 消耗的钻石
    newContinuousDays: int       // 补签后的连续天数
  }
```

### 4.3 配置表结构

**新建表：daily_signin_config**

| 字段名 | 类型 | 说明 |
|--------|------|------|
| day | int | 签到天数（1-7），主键 |
| gold_reward | int | 金币奖励基础值 |
| item_rewards | json | 物品奖励列表，格式：[{itemId, count}] |
| is_cycle_end | boolean | 是否为周期结束（第7天为true） |

**新建表：player_signin**

| 字段名 | 类型 | 说明 |
|--------|------|------|
| player_id | bigint | 玩家ID，主键 |
| continuous_days | int | 当前连续签到天数（1-7） |
| last_signin_date | date | 最后签到日期（YYYY-MM-DD） |  
| total_signin_days | int | 累计签到天数（统计用） |
| makeup_count_this_cycle | int | 本周期已补签次数 |
| cycle_start_date | date | 本周期开始日期 |

**修改表：daily_task（如果有每日任务系统）**

签到可以作为每日任务的一项，需要在任务配置中添加"完成签到"任务。

---

## 附录：开发提示

1. **时间判断**：务必使用服务器时间，避免玩家修改本地时间作弊
2. **断签判断**：通过比较last_signin_date和当前日期判断，相差>1天即为断签
3. **周期重置**：第7天签到后，将continuous_days重置为0，下次签到重新计为1
4. **补签不给奖励**：补签只修改last_signin_date，不发放奖励，注意逻辑分离
5. **VIP判断**：每次签到实时查询VIP等级，不要缓存
6. **并发控制**：同一玩家的签到操作需要加锁，防止并发导致重复签到

---

**文档版本**：v1.0  
**创建时间**：2026-01-28  
**策划设计**：[策划师姓名]

---

## 总结：工作流价值

通过这个演示可以看到，AI从简短的5句话描述，扩展为包含：
- ✅ 完整的规则说明（开启条件、参与条件、特殊处理）
- ✅ 详细的数值表格（7天奖励配置、补签价格）
- ✅ 明确的系统依赖和接口定义
- ✅ 清晰的配置表结构
- ✅ 开发提示和注意事项

程序员拿到这个文档，可以直接开始开发，不需要反复询问策划细节。这就是AI辅助文档生成的价值。
